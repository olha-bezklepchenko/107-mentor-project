{"version":3,"file":"commonHelpers.js","sources":["../src/js/unsplesh-api.js","../src/js/refs.js","../src/js/create-markup.js","../src/js/loader.js","../src/js/load-more.js","../src/js/gallery.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://api.unsplash.com';\nexport async function getPhotos(query, page) {\n  const API_KEY = 'LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc';\n\n  try {\n    const response = await axios.get('/search/photos', {\n      params: {\n        query,\n        page,\n        per_page: 12,\n        orientation: 'portrait',\n        client_id: API_KEY,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n\n","export const refs = {\n    form: document.querySelector(\".search-form\"),\n    galleryList: document.querySelector(\".gallery\"),\n    loader: document.querySelector(\".loader\"),\n    loadMoreBtn: document.querySelector(\".load-more\")\n}\n ","export function createMarkup (array) {\n    return array.map(item => \n        `<li>\n                <img src=\"${item.urls.small}\" alt=\"${item.description}\">\n            </li>`\n    ).join(\"\");\n}","import { refs } from \"./refs\";\n\nexport function showLoader() {\n    refs.loader.classList.remove(\"is-hidden\")\n}\n\nexport function hideLoder() {\n    refs.loader.classList.add(\"is-hidden\")\n}","import { refs } from \"./refs\";\n\n\nexport function showBtn() {\n    refs.loadMoreBtn.classList.remove(\"is-hidden\")\n}\n\nexport function hideBtn() {\n    refs.loadMoreBtn.classList.add(\"is-hidden\")\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getPhotos } from './unsplesh-api';\nimport { refs } from './refs';\nimport { createMarkup } from './create-markup';\nimport { showLoader, hideLoder } from './loader';\nimport { hideBtn, showBtn } from './load-more';\nrefs.form.addEventListener('submit', onSubmit);\nrefs.loadMoreBtn.addEventListener('click', onClick);\n\nlet page = 1;\nlet searchQuery = null;\n\nasync function onSubmit(event) {\n  event.preventDefault();\n  refs.galleryList.innerHTML = '';\n  page = 1;\n  showLoader();\n  hideBtn();\n  searchQuery = event.currentTarget.elements.search.value.trim();\n\n  try {\n    const response = await getPhotos(searchQuery, page);\n    if (response.results.length === 0) {\n      return iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'bottomRight',\n      });\n    }\n    refs.galleryList.innerHTML = createMarkup(response.results);\n    showBtn();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoder();\n    event.target.reset();\n  }\n}\n\nasync function onClick() {\n  page += 1;\n  showLoader();\n  hideBtn();\n  try {\n    const response = await getPhotos(searchQuery, page);\n    refs.galleryList.insertAdjacentHTML(\n      'beforeend',\n      createMarkup(response.results)\n    );\n\n    const lastPage = Math.ceil(response.total / 12);\n\n    if (lastPage === page) {\n      hideBtn();\n      iziToast.info({\n        message: 'The end',\n      });\n      return;\n    }\n    showBtn();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoder();\n  }\n}\n"],"names":["axios","getPhotos","query","page","API_KEY","error","refs","createMarkup","array","item","showLoader","hideLoder","showBtn","hideBtn","onSubmit","onClick","searchQuery","event","response","iziToast"],"mappings":"6vBACAA,EAAM,SAAS,QAAU,2BAClB,eAAeC,EAAUC,EAAOC,EAAM,CAC3C,MAAMC,EAAU,8CAEhB,GAAI,CAUF,OATiB,MAAMJ,EAAM,IAAI,iBAAkB,CACjD,OAAQ,CACN,MAAAE,EACA,KAAAC,EACA,SAAU,GACV,YAAa,WACb,UAAWC,CACZ,CACP,CAAK,GACe,IACjB,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CCnBO,MAAMC,EAAO,CAChB,KAAM,SAAS,cAAc,cAAc,EAC3C,YAAa,SAAS,cAAc,UAAU,EAC9C,OAAQ,SAAS,cAAc,SAAS,EACxC,YAAa,SAAS,cAAc,YAAY,CACpD,ECLO,SAASC,EAAcC,EAAO,CACjC,OAAOA,EAAM,IAAIC,GACb;AAAA,4BACoBA,EAAK,KAAK,KAAK,UAAUA,EAAK,WAAW;AAAA,kBAErE,EAAM,KAAK,EAAE,CACb,CCJO,SAASC,GAAa,CACzBJ,EAAK,OAAO,UAAU,OAAO,WAAW,CAC5C,CAEO,SAASK,GAAY,CACxBL,EAAK,OAAO,UAAU,IAAI,WAAW,CACzC,CCLO,SAASM,GAAU,CACtBN,EAAK,YAAY,UAAU,OAAO,WAAW,CACjD,CAEO,SAASO,GAAU,CACtBP,EAAK,YAAY,UAAU,IAAI,WAAW,CAC9C,CCFAA,EAAK,KAAK,iBAAiB,SAAUQ,CAAQ,EAC7CR,EAAK,YAAY,iBAAiB,QAASS,CAAO,EAElD,IAAIZ,EAAO,EACPa,EAAc,KAElB,eAAeF,EAASG,EAAO,CAC7BA,EAAM,eAAc,EACpBX,EAAK,YAAY,UAAY,GAC7BH,EAAO,EACPO,IACAG,IACAG,EAAcC,EAAM,cAAc,SAAS,OAAO,MAAM,OAExD,GAAI,CACF,MAAMC,EAAW,MAAMjB,EAAUe,EAAab,CAAI,EAClD,GAAIe,EAAS,QAAQ,SAAW,EAC9B,OAAOC,EAAS,MAAM,CACpB,QACE,2EACF,SAAU,aAClB,CAAO,EAEHb,EAAK,YAAY,UAAYC,EAAaW,EAAS,OAAO,EAC1DN,GACD,OAAQP,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRM,IACAM,EAAM,OAAO,OACd,CACH,CAEA,eAAeF,GAAU,CACvBZ,GAAQ,EACRO,IACAG,IACA,GAAI,CACF,MAAMK,EAAW,MAAMjB,EAAUe,EAAab,CAAI,EAQlD,GAPAG,EAAK,YAAY,mBACf,YACAC,EAAaW,EAAS,OAAO,CACnC,EAEqB,KAAK,KAAKA,EAAS,MAAQ,EAAE,IAE7Bf,EAAM,CACrBU,IACAM,EAAS,KAAK,CACZ,QAAS,SACjB,CAAO,EACD,MACD,CACDP,GACD,OAAQP,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRM,GACD,CACH"}